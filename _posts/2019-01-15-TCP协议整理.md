---
layout: post
title: "TCP协议整理"
categories: misc
author: "yaabert" 

---

## TCP协议

#### 滑动窗口
滑动窗口分为接受窗口和发送窗口  
滑动窗口协议是传输层进行流量控制的一种措施,接受放通过通告发送方自己的窗口大小,从而控制发送方的发送速度,从而达到防止发送方发送速度过快而导致自己被淹没的目的.

AKC的再认知,ack通常被理解为收到数据后给出的一个确认ACK,ACK包含两个非常重要的信息:     
__一、是期望接收到的下一个字节的序号n,该n代表接受方已经接收到了前n-1字节数据,此时如果接受方收到第n+1字节数据而不是第n字节数据,接受方是不会发送序列号为n+2的ACK的.__ 举个例子,加入接收端收到1-1024字节,他会发送一个确认号为1025的ACK,但是接下来收到的是2049-3072,它是不会发送确认号为3072的ACK,而依旧发送1025的ACK   
__二、当前窗口大小m,如此发送方在接收到ACK包含的这两个数据后就可以计算出还可以发送多少字节的数据给对方,假定当前发送方已经发送到第x字节,则可以发送的字节数就是y=m-(x-n)这个就是滑动窗口控制流量的基本原理.__

实际即为A(发送端)、B(接收端).建立连接时,B即通知A接收窗口大小,假定为窗口大小300,报文总长度400,A向B发送报文序列1-100,还能再发送200个字节,A向B发送报文序列101-200,还能再发送100字节,A向B发送报文序号201-300,还能再发送0字节.B收到1-100以及200-300的报文,中间内容丢失.此时B向A发送报文ACK=101,rwnd=200(允许A发送序号为101到300字节),A超时重传旧的数据(101-200),B接收到前300字节向A发送报文ack=301,rwnd=100,A发送301到400字节.四次挥手断开连接.

#### 三次握手 四次挥手

欠一哈,改天补上(最近沉迷下棋,改天补2019-01-15) 